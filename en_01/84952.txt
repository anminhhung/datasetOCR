From the great Berber dynasties of the Almoravids and Almohads to the militants seeking an Islamic state in the 1990s