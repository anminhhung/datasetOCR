after a long judicial battle