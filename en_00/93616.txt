A time varying speed of light as a solution to cosmological puzzles