astyages lost the support of his nobles during the war with cyrus the great